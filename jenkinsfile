pipeline {
  agent any

  options {
    timestamps()
  }

  stages {
    stage('Checkout') {
      steps {
        checkout scm
      }
    }

    stage('Setup Node & pnpm') {
       steps {
            bat """
            echo Node:
            node -v

            echo Installing pnpm globally (skip corepack)...
            npm i -g pnpm@10.9.0

            echo pnpm:
            pnpm -v
            """
        }
    }


    stage('Install dependencies') {
        steps {
            bat "pnpm install --frozen-lockfile"
        }
    }

    stage('Build') {
    steps {
            bat "pnpm build"
        }
    }
}
